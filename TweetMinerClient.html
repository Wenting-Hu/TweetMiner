<head>
    <title>TweetMiner</title>


    <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Play:700,400' type='text/css'>

    <script type="text/javascript" src="http://iop.io/js/vendor/d3.v3.min.js"></script>
    <script type="text/javascript" src="http://iop.io/js/vendor/polymer/PointerEvents/pointerevents.js"></script>
    <script type="text/javascript" src="http://iop.io/js/vendor/polymer/PointerGestures/pointergestures.js"></script>
    <script type="text/javascript" src="http://iop.io/js/iopctrl.js"></script>

</head>

<body>

    <!-- headerwrap -->
    <div id="headerwrap">
        <div class="container">
            <div class="col-lg-8 col-lg-offset-4">
                <h1>Tweet<b>Miner</b></h1>
            </div>
            <div class="col-lg-7 col-lg-offset-1">
                <h2>Auto Updating Tweets Ranking</h2>
            </div>
        </div>
    </div> <!-- headerwrap -->


    <!-- the refreshing button for Ramdon Topics-->
    <div class="col-lg-4 col-lg-offset-8">
        {{> refreshButton}}
    </div>


    <!-- Top 10 Topic -->
    <div class="col-md-4 col-sm-4">
        {{> topic10}}
    </div>
    <!-- Top 10 mentioned -->
    <div class="col-md-4 col-sm-4">
        {{> mention10}}
    </div>
    <!-- Random selected 10 Topic -->
    <div class="col-md-4 col-sm-4">
        {{> random10}}
    </div>

    {{> speedmeter}}

    <div class="textContainer"><h1>Tweets Per Second</h1></div>




</body>




<!-- templates for each module-->
<template name="topic10">
    <div class="tweetfeed-container">
        <div class="panel panel-default tweetfeed">
            <div class="panel-body">
                <!-- Text box for tweet content -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2>Top 10 Hot Topics</h2>
                    </div>
                </div>
                {{#each tweets}}
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            {{keyword}}
                        </div>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
</template>

<template name="mention10">
    <div class="tweetfeed-container">
        <div class="panel panel-default tweetfeed">
            <div class="panel-body">
                <!-- Text box for tweet content -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2>Top Mentioned Users</h2>
                    </div>
                </div>
                {{#each tweets}}
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            {{keyword}}
                        </div>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
</template>

<template name="random10">
    <div class="tweetfeed-container">
        <div class="panel panel-default tweetfeed">
            <div class="panel-body">
                <!-- Text box for tweet content -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2>Random Hot Topics</h2>
                    </div>
                </div>
                {{#each tweets}}
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            {{keyword}}
                        </div>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
</template>

<template name = "refreshButton">
    <button class="button buttonRefresh"></button>
</template>

<template name = "speedmeter">
    <!-- Tweets Per Second Module -->
    <div class="my-container">
        <div>
            <span id="speedometer"></span>
        </div>

        <script>
            var svg = d3.select("#speedometer")
                    .append("svg:svg")
                    .attr("width", 400)
                    .attr("height", 400);


            var gauge = iopctrl.arcslider()
                    .radius(120)
                    .events(false)
                    .indicator(iopctrl.defaultGaugeIndicator);
            gauge.axis().orient("in")
                    .normalize(true)
                    .ticks(12)
                    .tickSubdivide(3)
                    .tickSize(10, 8, 10)
                    .tickPadding(5)
                    .scale(d3.scale.linear()
                            .domain([0, 4000])
                            .range([-3*Math.PI/4, 3*Math.PI/4]));

            var segDisplay = iopctrl.segdisplay()
                    .width(80)
                    .digitCount(6)
                    .negative(false)
                    .decimals(0);

            svg.append("g")
                    .attr("class", "segdisplay")
                    .attr("transform", "translate(130, 200)")
                    .call(segDisplay);

            svg.append("g")
                    .attr("class", "gauge")
                    .call(gauge);

            setInterval(update, 1000);

            function update() {
                segDisplay.value({{traffic}});<!-- this is Tweets Per Second ------------------------------------------------------- -->
                gauge.value({{traffic}});
            }

        </script>

    </div>
</template>
